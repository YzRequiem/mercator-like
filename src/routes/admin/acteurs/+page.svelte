<script lang="ts">
	import type { PageData } from './$types';
	import CrudPage from '$lib/components/CrudPage.svelte';

	export let data: PageData;

	// PrÃ©parer les options pour les sites
	const sitesOptions =
		data.etablissements?.map((etablissement) => ({
			value: etablissement.nom,
			label: etablissement.nom
		})) || [];

	const fields = [
		{ key: 'nom', label: 'Nom', type: 'text', required: true },
		{ key: 'site', label: 'Site', type: 'select', options: sitesOptions },
		{ key: 'role', label: 'RÃ´le', type: 'text' }
	];

	const displayFields = ['nom', 'site', 'role'];

	const referenceData = {
		etablissements: data.etablissements
	};
</script>

<CrudPage
	data={data.acteurs}
	entityType="acteurs"
	entityLabel="Acteurs"
	entityIcon="ðŸ‘¥"
	{fields}
	{displayFields}
	{referenceData}
/>
