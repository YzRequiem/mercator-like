<script lang="ts">
	import type { PageData } from './$types';
	import CrudPage from '$lib/components/CrudPage.svelte';

	export let data: PageData;

	// Cr√©er les options pour le s√©lecteur de propri√©taire √† partir des acteurs
	const proprietaireOptions = (data.acteurs || []).map((acteur) => ({
		value: acteur.nom,
		label: acteur.nom
	}));

	const fields = [
		{ key: 'nom', label: 'Nom', type: 'text', required: true },
		{ key: 'source', label: 'Source', type: 'text' },
		{
			key: 'qualite',
			label: 'Qualit√©',
			type: 'select',
			options: [
				{ value: 'Tr√®s faible', label: 'Tr√®s faible' },
				{ value: 'Faible', label: 'Faible' },
				{ value: 'Moyenne', label: 'Moyenne' },
				{ value: 'Bonne', label: 'Bonne' },
				{ value: 'Tr√®s bonne', label: 'Tr√®s bonne' }
			]
		},
		{
			key: 'volume',
			label: 'Volume',
			type: 'select',
			options: [
				{ value: 'Tr√®s faible', label: 'Tr√®s faible' },
				{ value: 'Faible', label: 'Faible' },
				{ value: 'Moyen', label: 'Moyen' },
				{ value: '√âlev√©', label: '√âlev√©' },
				{ value: 'Tr√®s √©lev√©', label: 'Tr√®s √©lev√©' }
			]
		},
		{
			key: 'frequence_maj',
			label: 'Fr√©quence de mise √† jour',
			type: 'select',
			options: [
				{ value: 'En temps r√©el', label: 'En temps r√©el' },
				{ value: 'Quotidienne', label: 'Quotidienne' },
				{ value: 'Hebdomadaire', label: 'Hebdomadaire' },
				{ value: 'Mensuelle', label: 'Mensuelle' },
				{ value: 'Annuelle', label: 'Annuelle' },
				{ value: 'Ponctuelle', label: 'Ponctuelle' }
			]
		},
		{
			key: 'proprietaire',
			label: 'Propri√©taire',
			type: 'select',
			options: proprietaireOptions
		},
		{
			key: 'sensibilite',
			label: 'Sensibilit√©',
			type: 'select',
			options: [
				{ value: 'Public', label: 'Public' },
				{ value: 'Interne', label: 'Interne' },
				{ value: 'Confidentiel', label: 'Confidentiel' },
				{ value: 'Secret', label: 'Secret' }
			]
		},
		{ key: 'retention', label: 'Dur√©e de r√©tention', type: 'text' },
		{ key: 'format', label: 'Format', type: 'text' },
		{ key: 'taille_estimee', label: 'Taille estim√©e', type: 'text' }
	];

	const displayFields = ['nom', 'source', 'qualite', 'volume', 'proprietaire', 'sensibilite'];
</script>

<svelte:head>
	<title>Donn√©es - Administration</title>
</svelte:head>

<CrudPage
	data={data.donnees || []}
	entityType="donnees"
	entityLabel="Donn√©es"
	entityIcon="üìä"
	{fields}
	{displayFields}
/>
